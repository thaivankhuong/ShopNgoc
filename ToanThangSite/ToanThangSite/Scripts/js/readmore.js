!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";function f(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function g(a){var b=++e;return String(null==a?"rmjs-":a)+b}function h(a){var b=a.clone().css({height:"auto",width:a.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(a),c=b.outerHeight(),d=parseInt(b.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),e=a.data("defaultHeight");b.remove();var f=d||a.data("collapsedHeight")||e;a.data({expandedHeight:c,maxHeight:d,collapsedHeight:f}).css({maxHeight:"none"})}function j(a){if(!d[a.selector]){var b=" ";a.embedCSS&&""!==a.blockCSS&&(b+=a.selector+" + [data-readmore-toggle], "+a.selector+"[data-readmore]{"+a.blockCSS+"}"),b+=a.selector+"[data-readmore]{transition: height "+a.speed+"ms;overflow: hidden;}",function(a,b){var c=a.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=b:c.appendChild(a.createTextNode(b)),a.getElementsByTagName("head")[0].appendChild(c)}(document,b),d[a.selector]=!0}}function k(d,e){this.element=d,this.options=a.extend({},c,e),j(this.options),this._defaults=c,this._name=b,this.init(),window.addEventListener?(window.addEventListener("load",i),window.addEventListener("resize",i)):(window.attachEvent("load",i),window.attachEvent("resize",i))}var b="readmore",c={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},d={},e=0,i=f(function(){a("[data-readmore]").each(function(){var b=a(this),c="true"===b.attr("aria-expanded");h(b),b.css({height:b.data(c?"expandedHeight":"collapsedHeight")})})},100);k.prototype={init:function(){var b=a(this.element);b.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),h(b);var c=b.data("collapsedHeight"),d=b.data("heightMargin");if(b.outerHeight(!0)<=c+d)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(b,!1),!0;var e=b.attr("id")||g(),f=this.options.startOpen?this.options.lessLink:this.options.moreLink;b.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:e}),b.after(a(f).on("click",function(a){return function(c){a.toggle(this,b[0],c)}}(this)).attr({"data-readmore-toggle":e,"aria-controls":e})),this.options.startOpen||b.css({height:c}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(b,!0)},toggle:function(b,c,d){d&&d.preventDefault(),b||(b=a('[aria-controls="'+this.element.id+'"]')[0]),c||(c=this.element);var e=a(c),f="",g="",h=!1,i=e.data("collapsedHeight");e.height()<=i?(f=e.data("expandedHeight")+"px",g="lessLink",h=!0):(f=i,g="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(b,e,!h),e.css({height:f}),e.on("transitionend",function(c){return function(){c.options.afterToggle&&"function"==typeof c.options.afterToggle&&c.options.afterToggle(b,e,h),a(this).attr({"aria-expanded":h}).off("transitionend")}}(this)),a(b).replaceWith(a(this.options[g]).on("click",function(a){return function(b){a.toggle(this,c,b)}}(this)).attr({"data-readmore-toggle":e.attr("id"),"aria-controls":e.attr("id")}))},destroy:function(){a(this.element).each(function(){var b=a(this);b.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),b.removeData()})}},a.fn.readmore=function(c){var d=arguments,e=this.selector;return c=c||{},"object"==typeof c?this.each(function(){if(a.data(this,"plugin_"+b)){var d=a.data(this,"plugin_"+b);d.destroy.apply(d)}c.selector=e,a.data(this,"plugin_"+b,new k(this,c))}):"string"==typeof c&&"_"!==c[0]&&"init"!==c?this.each(function(){var e=a.data(this,"plugin_"+b);e instanceof k&&"function"==typeof e[c]&&e[c].apply(e,Array.prototype.slice.call(d,1))}):void 0}});